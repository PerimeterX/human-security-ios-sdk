{"kind":"article","hierarchy":{"paths":[["doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN"]]},"primaryContentSections":[{"content":[{"text":"What is an Hybrid App","type":"heading","anchor":"What-is-an-Hybrid-App","level":2},{"type":"paragraph","inlineContent":[{"text":"An Hybrid App uses both native URL requests and web views to communicate with your server. In the context of  HUMAN, it’s important to make sure both native requests and web views are synced together to make sure end users will get the expected behavior from your app.","type":"text"}]},{"anchor":"How-do-I-know-if-my-app-is-an-Hybrid-App","text":"How do I know if my app is an Hybrid App","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Your app is considered to be an Hybrid App if it has "},{"type":"strong","inlineContent":[{"text":"ALL","type":"text"}]},{"text":" of the following:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"A web view component ("},{"code":"WKWebView","type":"codeVoice"},{"type":"text","text":" on iOS or "},{"code":"WebView","type":"codeVoice"},{"type":"text","text":" on Android) that loads "},{"type":"strong","inlineContent":[{"type":"text","text":"your website"}]},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Your website"}]},{"type":"text","text":" is protected by HUMAN (Bot Defender or Account Defender)."}]}]}],"type":"orderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"On iOS, if your app uses "},{"identifier":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller","isActive":true,"type":"reference"},{"type":"text","text":", please let us know and we will guide you for a specifc integration."}]},{"level":2,"anchor":"How-to-enable-an-Hybrid-App-support-in-my-app","type":"heading","text":"How to enable an Hybrid App support in my app"},{"type":"heading","text":"Integrate the SDK (native)","level":3,"anchor":"Integrate-the-SDK-native"},{"inlineContent":[{"type":"text","text":"You should integrate the SDK to your native app. You may choose one of the following ways:"}],"type":"paragraph"},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Native_Easiest_Implementation","overridingTitle":"Easiest Implementation","overridingTitleInlineContent":[{"type":"text","text":"Easiest Implementation"}]}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Native_Basic_Implementation","overridingTitleInlineContent":[{"type":"text","text":"Basic Implementation"}],"overridingTitle":"Basic Implementation","type":"reference"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"overridingTitleInlineContent":[{"type":"text","text":"Advanced Functionality"}],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Native_Advanced_Functionality","type":"reference","isActive":true,"overridingTitle":"Advanced Functionality"}]}]}]},{"anchor":"Enable-Hybrid-App-support","level":3,"text":"Enable Hybrid App support","type":"heading"},{"inlineContent":[{"text":"When starting the SDK you should declare your website root domain in the policy. This should be the domain which the SDK will set cookies.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The SDK enables Hybrid App support ONLY for those domains. The SDK checks if the website’s domain ends with one of the domains that were set. For example: If you set "},{"type":"codeVoice","code":"example.com"},{"text":", the SDK will also support ","type":"text"},{"code":"www.example.com","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"api.example.com","type":"codeVoice"},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You should send the "},{"type":"codeVoice","code":"WebView"},{"type":"text","text":" instance to the SDK via the "},{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HumanSecurity\/setupWebView(webView:navigationDelegate:)","type":"reference","isActive":true},{"type":"text","text":" function in iOS and "},{"type":"codeVoice","code":"HumanSecurity\/setupWebView(webView:webViewClient:)"},{"text":" function in Android. This function sets the ","type":"text"},{"type":"codeVoice","code":"WebView"},{"text":"‘s ","type":"text"},{"type":"codeVoice","code":"navigationDelegate"},{"text":" (iOS) and ","type":"text"},{"code":"webViewClient","type":"codeVoice"},{"type":"text","text":" (Android) with the SDK’s object. "},{"type":"strong","inlineContent":[{"type":"text","text":"You should not set those properites after calling the "},{"type":"codeVoice","code":"setupWebView"},{"type":"text","text":" function"}]},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"On iOS, you can ask the SDK to detect ","type":"text"},{"code":"WKWebView","type":"codeVoice"},{"text":"s and setup them automatically without calling the ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HumanSecurity\/setupWebView(webView:navigationDelegate:)"},{"type":"text","text":" function for each instance. You can enable this feature by setting the "},{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HSHybridAppPolicy\/automaticSetup","isActive":true,"type":"reference"},{"text":" to be ","type":"text"},{"code":"true","type":"codeVoice"},{"type":"text","text":"."}]},{"inlineContent":[{"text":"Here is how it should be:","type":"text"}],"type":"paragraph"},{"level":4,"type":"heading","text":"Android","anchor":"Android"},{"type":"paragraph","inlineContent":[{"text":"Kotlin:","type":"text"}]},{"syntax":"kotlin","type":"codeListing","code":["import android.app.Application","import com.humansecurity.mobile_sdk.HumanSecurity","import com.humansecurity.mobile_sdk.main.policy.HSPolicy","","class MainApplication: Application() {","","    override fun onCreate() {","        super.onCreate()","        startHumanSDK()","    }","","    private fun startHumanSDK() {","        try {","            val policy = HSPolicy()","            \/\/ Configure the policy...","","            val webRootDomains = setOf(\".example.com\")","            policy.hybridAppPolicy.setWebRootDomains(webRootDomains, \"<APP_ID>\")","","            HumanSecurity.start(this, \"<APP_ID>\", null, policy)","        }","        catch (exception: Exception) {","            println(\"Exception: ${exception.message}\")","        }","    }","}"]},{"syntax":"kotlin","type":"codeListing","code":["import androidx.appcompat.app.AppCompatActivity","import android.os.Bundle","import android.webkit.WebView","import android.webkit.WebViewClient","import com.humansecurity.mobile_sdk.HumanSecurity","","class MainActivity: AppCompatActivity() {","","    override fun onCreate(savedInstanceState: Bundle?) {","        super.onCreate(savedInstanceState)","        setContentView(R.layout.activity_main)","","        val webView = findViewById<WebView>(R.id.web_view)","        val webViewClient = MyWebViewClient()","        HumanSecurity.setupWebView(webView, webViewClient)","","        \/\/ Load your website in the web view...","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Java:"}]},{"type":"codeListing","syntax":"java","code":["import android.app.Application;","import android.util.Log;","import java.util.HashSet;","import com.humansecurity.mobile_sdk.HumanSecurity;","import com.humansecurity.mobile_sdk.main.policy.HSPolicy;","","public class MainApplication extends Application {","","    @Override","    public void onCreate() {","        super.onCreate();","        startHumanSDK();","    }","","    void startHumanSDK() {","        try {","            HSPolicy policy = new HSPolicy();","            \/\/ Configure the policy...","","            HashSet<String> domains = new HashSet<>();","            domains.add(\".example.com\");","            policy.getHybridAppPolicy().setWebRootDomains(domains, \"<APP_ID>\");","","            HumanSecurity.INSTANCE.start(this, \"<APP_ID>\", null, policy);","        }","        catch (Exception exception) {","            Log.e(\"MainApplication\",\"Exception: \" + exception.getMessage());","        }","    }","}"]},{"type":"codeListing","syntax":"java","code":["import androidx.appcompat.app.AppCompatActivity;","import android.os.Bundle;","import android.webkit.WebView;","import android.webkit.WebViewClient;","import com.humansecurity.mobile_sdk.HumanSecurity;","","public class MainActivity extends AppCompatActivity {","","    @Override","    protected void onCreate(Bundle savedInstanceState) {","        super.onCreate(savedInstanceState);","        setContentView(R.layout.activity_main);","","        WebView webView = findViewById(R.id.web_view);","        MyWebViewClient webViewClient = new MyWebViewClient();","        HumanSecurity.INSTANCE.setupWebView(webView, webViewClient);","","        \/\/ Load your website in the web view...","    }","}"]},{"level":4,"text":"iOS","type":"heading","anchor":"iOS"},{"inlineContent":[{"text":"Swift:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["import UIKit","import HUMAN","","class AppDelegate: UIResponder, UIApplicationDelegate {","","    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {","        startHumanSDK()","        return true","    }","","    func startHumanSDK() {","        do {","            let policy = HSPolicy()","            \/\/ Configure the policy...","","            policy.hybridAppPolicy.set(webRootDomains: [\".example.com\"], forAppId: \"<APP_ID>\")","            ","            try HumanSecurity.start(appId: \"<APP_ID>\", delegate: nil, policy: policy)","        }","        catch {","            print(\"Error: \\(error)\")","        }","    }","}",""],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"Objective-C:","type":"text"}]},{"type":"codeListing","syntax":"objc","code":["@import HUMAN;","","@implementation AppDelegate","","- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {","    [self startHumanSDK];","    return YES;","}","","- (void)startHumanSDK {","    HSPolicy *policy = [[HSPolicy alloc] init];","    \/\/ Configure the policy...","","    [policy.hybridAppPolicy setWithWebRootDomains:[NSSet setWithObject:@\".example.com\"] forAppId:@\"<APP_ID>\"];","","    NSError *error = nil;","    [HumanSecurity startWithAppId:@\"<APP_ID>\" delegate:nil policy:policy error:&error];","    if (error != nil) {","        NSLog(@\"Error: %@\", error);","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Let’s talk about what we have in the code here:"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"We add our website’s domain to the policy’s web root domain list."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"We start the SDK.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"[Android only] We call the "},{"code":"HumanSecurity\/setupWebView(webView:webViewClient:)","type":"codeVoice"},{"type":"text","text":" function with the following parameters:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"webView"},{"type":"text","text":" - the web view we want to setup."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"webViewClient"},{"type":"text","text":" (optional) - the web view client that we want to set in the web view."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The SDK creates it own web view client and set it in web view. The SDK will pass all events to your web view client. "},{"type":"strong","inlineContent":[{"type":"text","text":"DO NOT set the web view client directly"}]},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"text":"The SDK enables JavaScript by setting ","type":"text"},{"code":"webView.settings.javaScriptEnabled","type":"codeVoice"},{"text":" to ","type":"text"},{"type":"codeVoice","code":"true"},{"type":"text","text":". "},{"type":"strong","inlineContent":[{"text":"DO NOT change this setting","type":"text"}]},{"text":".","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"[iOS only] We call the "},{"isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HumanSecurity\/setupWebView(webView:navigationDelegate:)","type":"reference"},{"type":"text","text":" function with the following parameters:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"webView"},{"type":"text","text":" - the web view we want to setup."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"navigationDelegate"},{"type":"text","text":" (optional) - the navigation delegate that we want to set in the web view."}],"type":"paragraph"}]}]},{"inlineContent":[{"text":"The SDK creates it own web navigation delegate and set it in web view. The SDK will pass all events to your navigation delegate. ","type":"text"},{"inlineContent":[{"type":"text","text":"DO NOT set the navigation delegate directly"}],"type":"strong"},{"type":"text","text":"."}],"type":"paragraph"}]}]},{"text":"Apple Pay on the Web","anchor":"Apple-Pay-on-the-Web","level":3,"type":"heading"},{"inlineContent":[{"text":"If your website uses ","type":"text"},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/apple_pay_on_the_web","isActive":true},{"text":" you should disable JavaScript evaluation by the SDK. In order to protect the security of Apple Pay transactions in ","type":"text"},{"code":"WKWebView","type":"codeVoice"},{"type":"text","text":", Apple Pay cannot be used alongside of script injection APIs (relevant for iOS 13-15). You can do this by setting the SDK’s policy. However, if your app is targeting "},{"type":"strong","inlineContent":[{"type":"text","text":"only"}]},{"text":" iOS 16 or above, you don’t have to disable JavaScript evaluation by the SDK.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here is how it should be:"}]},{"inlineContent":[{"text":"Swift:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["policy.hybridAppPolicy.allowJavaScriptEvaluation = false"]},{"inlineContent":[{"text":"Objective-C:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["policy.hybridAppPolicy.allowJavaScriptEvaluation = NO;"],"syntax":"objc"}],"kind":"content"}],"sections":[],"identifier":{"url":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Hybrid_App_Integration","interfaceLanguage":"swift"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/human\/hybrid_app_integration"]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/human\/hybrid_app_integration"]}],"schemaVersion":{"patch":0,"minor":3,"major":0},"metadata":{"role":"article","modules":[{"name":"HUMAN"}],"title":"Hybrid App Integration","roleHeading":"Article"},"references":{"https://developer.apple.com/documentation/apple_pay_on_the_web":{"type":"link","title":"Apple Pay on the Web","url":"https:\/\/developer.apple.com\/documentation\/apple_pay_on_the_web","titleInlineContent":[{"text":"Apple Pay on the Web","type":"text"}],"identifier":"https:\/\/developer.apple.com\/documentation\/apple_pay_on_the_web"},"doc://com.perimeterx.mobile-sdk/documentation/HUMAN/Native_Basic_Implementation":{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Native_Basic_Implementation","type":"topic","role":"article","title":"Native - Basic Implementation","abstract":[],"kind":"article","url":"\/documentation\/human\/native_basic_implementation"},"doc://com.perimeterx.mobile-sdk/documentation/HUMAN/HumanSecurity/setupWebView(webView:navigationDelegate:)":{"url":"\/documentation\/human\/humansecurity\/setupwebview(webview:navigationdelegate:)","abstract":[{"text":"Setup the web view to be synced with SDK. Do not set a ","type":"text"},{"type":"codeVoice","code":"WKNavigationDelegate"},{"text":" to the web view after calling this function.","type":"text"},{"type":"text","text":" "},{"text":"If you wish to set a web view client, call this function again with the new ","type":"text"},{"code":"WKNavigationDelegate","type":"codeVoice"},{"type":"text","text":". You should not call this method when the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HSHybridAppPolicy\/automaticSetup"},{"text":" is set to ","type":"text"},{"type":"codeVoice","code":"true"},{"type":"text","text":"."}],"title":"setupWebView(webView:navigationDelegate:)","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"setupWebView"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"webView"},{"kind":"text","text":": "},{"text":"WKWebView","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)WKWebView"},{"kind":"text","text":", "},{"kind":"externalParam","text":"navigationDelegate"},{"kind":"text","text":": "},{"preciseIdentifier":"c:objc(pl)WKNavigationDelegate","text":"WKNavigationDelegate","kind":"typeIdentifier"},{"kind":"text","text":"?)"}],"navigatorTitle":[{"text":"setupWebViewWithWebView:navigationDelegate:","kind":"identifier"}],"type":"topic","role":"symbol","kind":"symbol","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HumanSecurity\/setupWebView(webView:navigationDelegate:)"},"https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller":{"title":"SFSafariViewController","titleInlineContent":[{"type":"codeVoice","code":"SFSafariViewController"}],"url":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/safariservices\/sfsafariviewcontroller"},"doc://com.perimeterx.mobile-sdk/documentation/HUMAN":{"role":"collection","type":"topic","kind":"symbol","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN","abstract":[{"identifier":"HUMAN_logo.png","type":"image"}],"title":"HUMAN","url":"\/documentation\/human"},"doc://com.perimeterx.mobile-sdk/documentation/HUMAN/Native_Advanced_Functionality":{"url":"\/documentation\/human\/native_advanced_functionality","abstract":[],"title":"Native - Advanced Functionality","type":"topic","role":"article","kind":"article","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Native_Advanced_Functionality"},"doc://com.perimeterx.mobile-sdk/documentation/HUMAN/HSHybridAppPolicy/automaticSetup":{"url":"\/documentation\/human\/hshybridapppolicy\/automaticsetup","abstract":[{"type":"text","text":"When this property is "},{"code":"true","type":"codeVoice"},{"text":", the SDK detects all ","type":"text"},{"type":"codeVoice","code":"WKWebView"},{"text":" instances and sets them up for Hybrid App support automatically. As a result, you don’t need to call the ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HumanSecurity\/setupWebView(webView:navigationDelegate:)","isActive":true},{"text":" function. Default is ","type":"text"},{"type":"codeVoice","code":"false"},{"text":".","type":"text"}],"title":"automaticSetup","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"text":"automaticSetup","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"}],"navigatorTitle":[{"text":"automaticSetup","kind":"identifier"}],"type":"topic","role":"symbol","kind":"symbol","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/HSHybridAppPolicy\/automaticSetup"},"doc://com.perimeterx.mobile-sdk/documentation/HUMAN/Native_Easiest_Implementation":{"url":"\/documentation\/human\/native_easiest_implementation","abstract":[],"title":"Native - Easiest Implementation","type":"topic","role":"article","kind":"article","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/HUMAN\/Native_Easiest_Implementation"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"path":"\/topicSections","value":null,"op":"add"},{"path":"\/seeAlsoSections","value":null,"op":"add"},{"value":"setupWebViewWithWebView:navigationDelegate:","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1HUMAN~1HumanSecurity~1setupWebView(webView:navigationDelegate:)\/title","op":"replace"},{"path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1HUMAN~1HumanSecurity~1setupWebView(webView:navigationDelegate:)\/fragments","op":"replace","value":[{"kind":"text","text":"+ "},{"text":"setupWebViewWithWebView:navigationDelegate:","kind":"identifier"}]},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1HUMAN~1HSHybridAppPolicy~1automaticSetup\/title","value":"automaticSetup"},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1HUMAN~1HSHybridAppPolicy~1automaticSetup\/fragments","value":[{"kind":"identifier","text":"automaticSetup"}]}]}]}